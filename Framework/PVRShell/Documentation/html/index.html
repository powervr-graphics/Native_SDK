<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="Doxygen 1.8.4"/>
<title>PVRShell: PVRShell</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="IMGdoxygen.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="http://www.imgtec.com/images/img.ico">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
  <div class="headercontent">
    <div class="PVRlogo">
      <a href="http://www.powervrinsider.com" target="_blank"><img src="PVRlogo.png" width="40%" height="40%" border="none"/></a>
    </div>
    <a class="SiteTitle"><span id="projectname">PVRShell</span> Documentation</a>
   <tbody>
  </div>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PVRShell </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#usage">Using PVRShell</a></li>
<li class="level1"><a href="#code">Code Examples</a></li>
<li class="level1"><a href="#cmd">Command-Line Arguments</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>PVRShell will usually be the foundation on top of which an application is written. This library abstracts the system and contains, among others, the application’s entry point (<a class="el" href="main_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a>, <a class="el" href="android__main_2main_8cpp.html#af41cc09b28780477f10deb7c6c4f2d35" title="Main function: Entry point for the Android platform. ">android_main()</a> or other, depending on the platform), command line arguments, events, main loop, etc., effectively abstracting the native platform.</p>
<p>Also, PVRShell will create and teardown the window, initialize and de-initialize the graphics system, swap the buffers at the end of every frame, search platform-specific methods and file system storage (file system, assets, bundle, etc.).</p>
<p>PVRShell directly depends on PVRCore and PVRPlatformGlue, and needs the presence of PVRApi (or technically another library that provides a <span class="code">createGraphicsContext</span> library returning an <span class="code">IGraphicsContext</span>). Normally, PVRShell is used as the first step of every PowerVR SDK application.</p>
<p>PVRShell source can be found in the <a href="../../">PVRShell</a> folder in the SDK package.</p>
<h1><a class="anchor" id="usage"></a>
Using PVRShell</h1>
<p>To use PVRShell: </p>
<ul>
<li>
Depending on the platform, add the module in by adding either:<br/>
 <ul>
<li>
A project dependency (windows/osx/ios/android/...) (project file in <span class="code">Framework/PVRShell/Build/[Platform]/...</span>) </li>
<li>
The library to link against directly (windows/android/linux makefiles) (.so etc. in <span class="code">Framework/Bin/[Platform]/[lib?]PVRShell[.lib/.so]</span>) </li>
</ul>
</li>
<li>
In your main code file, include <span class="code"><a class="el" href="_p_v_r_shell_8h.html" title="Include this file if you wish to use the PVRShell functionality. Also see PVRShellNoPVRApi.h. ">PVRShell/PVRShell.h</a></span> </li>
<li>
Also link against the PowerVR Framework dependencies of PVRShell: (PVRCore, PVRPlatformGlue, usually PVRApi) </li>
<li>
Note: If not linking against a PVRApi library, include the file <span class="code"><a class="el" href="_p_v_r_shell_no_p_v_r_api_8h.html" title="Include this file if you wish to use the PVRShell functionality, but you will NOT be linking with a P...">PVRShell/PVRShellNoPVRApi.h</a></span> <b>once</b>, in <b>one</b> source file of your application. In other places where you need to use the Shell class, include this file as normal. If you use PVRShell without PVRApi, all PVRShell functions that query or modify graphics contexts cannot be called. </li>
<li>
In your application, write a class inheriting from PVRShell </li>
<li>
Write a function <span class="code"><a class="el" href="namespacepvr.html#aacdfd9cc3d99a51f4b534c2b75f40920" title="—IMPLEMENT THIS FUNCTION IN YOUR MAIN CODE FILE TO POWER YOUR APPLICATION— ">pvr::newDemo()</a></span> that returns a <span class="code">std::auto_ptr</span> to a created instance of your class (refer to the bottom of any example) </li>
<li>
Implement the pure virtual functions of <span class="code">pvr::Shell</span> in your own class (<span class="code">initApplication</span>, <span class="code">initView</span>, <span class="code">renderFrame</span>, <span class="code">releaseView</span>, <span class="code">quitApplication</span>) </li>
<li>
Write an application class inheriting from <span class="code">pvr::Shell</span> </li>
<li>
Implement a simple function <span class="code"><a class="el" href="namespacepvr.html#aacdfd9cc3d99a51f4b534c2b75f40920" title="—IMPLEMENT THIS FUNCTION IN YOUR MAIN CODE FILE TO POWER YOUR APPLICATION— ">pvr::newDemo()</a></span> returning an <span class="code">auto_ptr</span> to an instance of your application class </li>
</ul>
<ul>
<li>
<p class="startli">Implement <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#ad637d4523f1fdcf44d6ca0a21f2f0226" title="IMPLEMENT THIS FUNCTION IN YOUR APPLICATION CLASS. This event represents application start...">pvr::Shell::initApplication()</a></span> </p>
<p>This is the first initialization step. It is called once, after PVRShell is initialized, but before the Device/Graphics Context have been initialized. Initialization steps that do not require a graphical context can go here (Model file loading, etc.). Any preferences that will influence context creation should be here.</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
<p class="startli">Implement <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#ab574513557e86a6f0f46fa07fc373354" title="IMPLEMENT THIS FUNCTION IN YOUR APPLICATION CLASS. This event represents successful context aquisitio...">pvr::Shell::initView()</a></span> </p>
<p>This is called right after a Device/Graphics Context is created and bound. Additionally, if the context is lost, this function is called when it is recreated. Implement any initialization operations that would require a graphics context initialized (texture loading, buffer creation etc.).</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
<p class="startli">Implement <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#ad9a8b66f7385389d68714087a053cb79" title="IMPLEMENT THIS FUNCTION IN YOUR APPLICATION CLASS. This event represents graphics context released...">pvr::Shell::releaseView()</a></span> </p>
<p><span class="code">releaseView()</span> is called just before a Graphics Context is released at teardown, or if it is lost (for example, minimizing the application on Android). Release API objects (textures, buffers) should be here.</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
<p class="startli">Implement <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#a3ce3a305b3fb05b19036d9fc2cfe202a" title="IMPLEMENT THIS FUNCTION IN YOUR APPLICATION CLASS. This event represents application exit...">pvr::Shell::quitApplication()</a></span> </p>
<p>This is called just before application teardown, after the context is lost. Release any left-over non-API resources here.</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
<p class="startli">Implement <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#aed81d7c469e9811740f1d4069f671165" title="IMPLEMENT THIS FUNCTION IN YOUR APPLICATION CLASS. This event represents every frame. ">pvr::Shell::renderFrame()</a></span> </p>
<p><span class="code">renderFrame()</span> is called every frame and is intended to contain the logic and actual drawing code. Backbuffer swapping is done automatically.</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
<p class="startli">(Recommended, optional step) Implement input event handling </p>
<p>Override either <span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#a51ad0df5ac3704def88cf3fcb3664ba4" title="Override in your class to handle a unified interface for input across different platforms and devices...">pvr::Shell::eventMappedInput</a>(…)</span> and/or any of the device-specific input functions (<span class="code"><a class="el" href="classpvr_1_1system_1_1_shell.html#aae53b13850b517b179b88c1bfc8a8e1a" title="Used externally to signify events to the Shell. Do not use. ">pvr::Shell::onKeyDown</a></span>, <span class="code">onKeyUp</span>, <span class="code">onPointingDeviceDown</span>, etc.).</p>
<p></p>
<p><span class="code">eventMappedInput()</span> is a call-back provided by PVRShell to handle simplified input events unified across different platforms (for example, both a swipe left of a touchscreen, and the left arrow on a keyboard would map to <span class="code">MappedInput::Left</span>).</p>
<p class="endli"></p>
</li>
</ul>
<ul>
<li>
The application entry point is provided by PVRShell library. Hence, application start, context creation, initialization, etc., will all be done for you. </li>
</ul>
<h1><a class="anchor" id="code"></a>
Code Examples</h1>
<div class="fragment"><div class="line"><span class="comment">//The five callbacks house the application</span></div>
<div class="line"><span class="keywordtype">void</span> MyApplication::initApplication { setApiTypeRequired(pvr::api::OpenGLES3);}</div>
<div class="line"><a class="code" href="namespacepvr_1_1_simplified_input.html#ace2de3f709dfe57949e7b224fee4bb4f" title="Enumeration representing a simplified, unified input event designed to unify simple actions across di...">pvr::Result::Enum</a> MyApplication::renderFrame() { <span class="keywordtype">float</span> dt =this-&gt;getFrameTime(); ... }</div>
</div><!-- fragment --><div class="fragment"><div class="line">this-&gt;getAssetStream(“Texture.pvr”); <span class="comment">// Will look everywhere for assets: Files, then Windows //Resources(.rc)/iOS bundled resources/Android assets</span></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyApplication::eventMappedInput(SimplifiedInput::Actions evt){ <span class="comment">//Abstracts/simplifies</span></div>
<div class="line"><span class="keywordflow">switch</span> (evt){<span class="keywordflow">case</span> <a class="code" href="namespacepvr_1_1_simplified_input.html#ace2de3f709dfe57949e7b224fee4bb4fa78423d692116dd2cc1b71ee1cbd60973" title="Space, Enter, Touch screen center. ">MappedInputEvent::Action1</a>: pauseDemo();<span class="keywordflow">break</span>; <span class="keywordflow">case</span> <a class="code" href="namespacepvr_1_1_simplified_input.html#ace2de3f709dfe57949e7b224fee4bb4fad6af173d34be0ed7f5358f849903d966" title="Left arrow, Swipe left. ">MappedInputEvent::Left</a>: showPreviousPage(); <span class="keywordflow">break</span>; <span class="keywordflow">case</span> MappedInputEvent::Quit: <span class="keywordflow">if</span> (showExitDialogue()) exitShell(); <span class="keywordflow">break</span>;}}</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyApplication::eventKeyUp(<a class="code" href="namespacepvr_1_1_simplified_input.html#ace2de3f709dfe57949e7b224fee4bb4f" title="Enumeration representing a simplified, unified input event designed to unify simple actions across di...">Keys::Enum</a> key){} <span class="comment">// Or, detailed keyboard/mouse/touch input</span></div>
</div><!-- fragment --><h1><a class="anchor" id="cmd"></a>
Command-Line Arguments</h1>
<p>PVRShell takes a set of command-line arguments which allow items like the position and size of the example to be controlled. The table below identifies these options. </p>
<table class="doxtable">
<tr>
<th>Option</th><th>Description  </th></tr>
<tr>
<td>-aasamples=N</td><td>Sets the number of samples to use for full screen anti-aliasing, e.g., 0, 2, 4, 8.  </td></tr>
<tr>
<td>-c=N</td><td>Save a single screenshot or a range, for a given frame or frame range, e.g., -c=14, -c=1-10.  </td></tr>
<tr>
<td>-colourbpp=N or -colorbpp=N or -cbpp=N</td><td>Frame buffer colour bits per pixel. When choosing an EGL config, N will be used as the value for EGL_BUFFER_SIZE.  </td></tr>
<tr>
<td>-config=N</td><td>Force the shell to use the EGL config with ID N.  </td></tr>
<tr>
<td>-depthbpp=N or -dbpp=N</td><td>Depth buffer bits per pixel. When choosing an EGL config, N will be used as the value for EGL_DEPTH_SIZE.  </td></tr>
<tr>
<td>-display</td><td>EGL only. Allows specifying the native display to use if the device has more than one.  </td></tr>
<tr>
<td>-forceframetime=N or -fft=N</td><td>Force PVRShellGetTime to report fixed frame time.  </td></tr>
<tr>
<td>-fps</td><td>Output frames per second.  </td></tr>
<tr>
<td>-fullscreen=[1,0]</td><td>Runs in full-screen mode (1) or windowed (0).  </td></tr>
<tr>
<td>-height=N</td><td>Sets the viewport height to N.  </td></tr>
<tr>
<td>-info</td><td>Output setup information to the debug output.  </td></tr>
<tr>
<td>-posx=N</td><td>Sets the x coordinate of the viewport.  </td></tr>
<tr>
<td>-posy=N</td><td>Sets the y coordinate of the viewport.  </td></tr>
<tr>
<td>-powersaving=[1,0] or -ps=[1,0]</td><td>Where available enable/disable power saving.  </td></tr>
<tr>
<td>-priority=N</td><td>Sets the priority of the EGL context.  </td></tr>
<tr>
<td>-quitafterframe=N or -qaf=N</td><td>Specify the frame after which to quit.  </td></tr>
<tr>
<td>-quitaftertime=N or -qat=N</td><td>Specify the time after which to quit.  </td></tr>
<tr>
<td>-rotatekeys=N</td><td>Sets the orientation of the keyboard input. N can be 0-3, where 0 is no rotation.  </td></tr>
<tr>
<td>-screenshotscale=N</td><td>Allows to scale up screenshots to a bigger size (pixel replication).  </td></tr>
<tr>
<td>-sw</td><td>Software render.  </td></tr>
<tr>
<td>-version</td><td>Output the SDK version to the debug output.  </td></tr>
<tr>
<td>-vsync=N</td><td>Where available modify the app's vsync parameters. 0: No vsync, 1: Vsync, -1: Adaptive Vsync  </td></tr>
<tr>
<td>-width=N</td><td>Sets the viewport width to N.  </td></tr>
</table>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part (NON TREEVIEW ONLY!!) -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="FooterMainContainer">
	<div id="FooterContainer">
		<div class="footerlogo">
			<a href="http://www.imgtec.com" target="_blank"><img src="img-footer-logo-grey.png" width="100%" height="100%" border="none" /></a>
		</div>
		<div class="copyright"><p>&copy; Imagination Technologies Limited<br> All rights reserved</p></div>
	</div>
</div>
</body>
</html>
